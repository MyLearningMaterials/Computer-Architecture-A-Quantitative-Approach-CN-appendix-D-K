# D.3 真正的错误与失败的定义和例子

尽管人们可能愿意忍受一台偶尔死机并迫使所有程序重新启动的电脑，但他们坚持认为自己的信息永远不会丢失。无论发生什么，存储的首要指令就是记住信息。

第1章涵盖了可靠性的基础知识，本节扩展了相关信息，给出了标准定义和故障示例。

第一步是澄清对术语的混淆。术语故障、错误和失败通常可以互换使用，但它们在可靠性文献中具有不同的含义。例如，编程错误是故障、错误还是失败?我们讨论程序是什么时候设计的还是什么时候运行的有关系吗?如果运行的程序没有执行错误，它仍然是一个故障/错误/失败吗?试试另一个。假设一个粒子击中了DRAM存储单元。如果它没有改变值，这是一个错误/错误/失败吗?它是一个故障/错误/失败，如果内存不访问改变位?如果内存有错误纠正并将纠正的值传递给CPU，是否仍然发生故障/错误/失败?你明白了困难的含义。显然，我们需要精确的定义来明智地讨论这些事件。

为了避免这种不精确，本小节基于Laprie\[1985]和Gray and Siewiorek\[1991]使用的术语，并得到了IFIP工作组10.4和IEEE计算机协会容错技术委员会的认可。我们将系统视为单个模块，但该术语递归地适用于子模块。让我们从可靠性的定义开始:

计算机系统的可靠性是指所提供服务的质量，使人们可以合理地依赖于这项服务。系统交付的服务是与该系统的用户交互的其他系统感知到的观察到的实际行为。每个模块还具有理想的指定行为，其中服务规范是对预期行为的商定描述。当实际行为偏离指定行为时，系统会发生故障。故障的发生是由于一个错误，一个模块的缺陷。错误的原因是故障。

当故障发生时，它会产生一个潜在的错误，当它被激活时，它就会生效；当错误实际影响到交付的服务时，就发生故障。发生错误和导致失败之间的时间称为错误延迟。因此，错误是系统故障的表现，而失败是错误在服务上的表现。\[p. 3]

让我们回到上面的激励例子。编程错误就是错误。其结果是软件中的错误(或潜在错误)。激活后，错误生效。当此有效错误产生影响所交付服务的错误数据时，就会发生故障。

α粒子撞击DRAM可被视为故障。如果它改变了内存，就会产生错误。在读取受影响的内存字之前，错误将保持潜伏状态。如果有效字错误影响到交付的服务，则发生故障。如果ECC纠正了错误，则不会发生故障。

操作员的错误是错误。结果改变的数据是错误的。它是潜伏的，直到被激活，依此类推。

为了之后的讨论更加清晰，故障、错误和失败之间的关系如下:

* 一个错误会产生一个或多个潜在错误。
* 误差的性质是:(1)潜在误差一旦被激活就会生效；(2)误差可能在潜在状态和有效状态之间循环；(3)有效误差经常从一个分量传播到另一个分量，从而产生新的误差。因此，有效误差要么是该组件中先前潜在的误差，要么是从该组件或其他地方的另一个误差传播过来的。
* 当错误影响到交付的服务时，将发生组件故障。
* 这些属性是递归的，适用于系统中的任何组件。

Gray和Siewiorek根据原因将断层分为四类：

1. 硬件故障——设备故障，比如可能是由于粒子击中了存储单元
2. 设计错误——软件(通常)和硬件(偶尔)设计错误
3. 操作类故障—操作维护人员的失误
4. 环境故障——火灾、洪水、地震、电力故障和破坏

故障根据其持续时间分为短暂性、间歇性和永久性\[Nelson 1990]。暂态故障存在的时间有限，不会重复发生。间歇故障导致系统在故障运行和无故障运行之间来回切换。永久的故障不会随着时间的流逝而自我纠正。

既然我们已经定义了故障、错误和失败之间的区别，我们就可以看一些现实世界的例子了。关于实际错误率的出版物很少，原因有二。首先，学术界很少有机会获得重要的硬件资源来进行测量。其次，工业研究人员很少被允许发布失败信息，因为他们担心这些信息会在市场上被用来对付他们的公司。但以下是一些例外。

#### 伯克利三级磁盘

2000年，加州大学的“三级磁盘”项目为旧金山美术博物馆创建了一个艺术图像服务器。该数据库包含超过70,000件艺术品的高质量图像\[Talagala et al .，2000]。数据库存储在一个集群中，该集群由20台pc机组成，通过交换以太网连接，包含368个磁盘。它占据了7个7英尺高的架子。

三级盘各部件故障率如图D.6所示。在构建系统之前，设计人员假定SCSI数据磁盘是系统中最不可靠的部分，因为它们既机械又丰富。接下来是IDE磁盘，因为它们较少，然后是电源，然后是集成电路。他们认为像电缆这样的无源设备几乎不会发生故障。

<figure><img src="../.gitbook/assets/image (7).png" alt=""><figcaption><p>图D.6 三级盘部件运行18个月以上故障情况。对于每种类型的组件，表中显示了系统中的总数、失败数量和失败率百分比。硬盘框在表中有两个条目，因为它们有两种类型的问题:背板完整性故障和电源故障。由于每个机箱有两个电源，电源故障不会影响可用性。这个由20台个人电脑组成的集群，放在7个7英尺高、19英寸宽的机架上，托管着368个8.4 GB、7200转/分钟、3.5英寸的IBM磁盘。pc的频率为p6 ~ 200mhz，每台内存为96mb。它们运行的是FreeBSD 3.0，主机通过交换的100mbit /s以太网连接。所有SCSI磁盘都通过双端SCSI链连接到两台pc上，以支持RAID 1。主要的应用程序被称为Zoom项目，在1998年，它是世界上最大的艺术图像数据库，拥有72,000张图像。参见Talagala et al(2000b)。</p></figcaption></figure>
